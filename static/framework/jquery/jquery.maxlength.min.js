(function (a) {
    a.fn.maxlength = function (b) {
        function h(a) { var c = a.value; if (c == a.placeholder) return 0; b.words && (c = a.value.length ? c.split(/\s+/) : { length: 0 }); return c.length } "string" == typeof b && (b = { feedback: b }); b = a.extend({}, a.fn.maxlength.defaults, b); return this.each(function () {
            function k(e) {
                var c = h(this), a; a = null; a = (a = window.getSelection ? this.value.substr(this.selectionStart, this.selectionEnd - this.selectionStart) : document.selection.createRange().text) ? a.length : 0; e = e.keyCode; if (c - a >= f) switch (e) {
                    case 8: case 9: case 17: case 36: case 35: case 37: case 38: case 39: case 40: case 46: break;
                    default: return b.words && 32 != e && 13 != e && c == f
                }
            } var c = this, g = a(c), d = a(c.form), f = b.useInput ? d.find("input[name=maxlength]").val() : g.attr("maxlength"), l = d.find(b.feedback), d = function () { var a = h(c), a = f - a; b.hardLimit && 0 > a && (c.value = b.words ? c.value.split(/(\s+)/, 2 * f - 1).join("") : c.value.substr(0, f)); if (!a || 0 > a) a = 0; l.html(a); b.feedbackFun && b.feedbackFun(a) }; g.keyup(d).change(d); b.hardLimit && g.keydown(k); d()
        })
    }; a.fn.maxlength.defaults = { useInput: !1, hardLimit: !0, feedback: ".charsLeft", feedbackFun: null, words: !1 }
})(jQuery);